{
    "port": 4549,
    "name": "Trafiklab",
    "protocol": "http",
    "stubs": [{
        "responses": [{
            "is": {
                "statusCode": 200,
                "headers": {
                    "Content-Type": "application/json; charset=utf-8"
                },
                "body": "<%- stringify(filename, 'trainDeviationsResponse.ejs') %>"
            },
            "_behaviors": {
                "decorate": "function (request, response) { var now = new Date().toISOString().substring(0, 10); response.body = response.body.replace(/{TODAY}/g, now);}"
            }
        }],
        "predicates": [{
            "contains": {
                "path": "deviations.json",
                "method": "GET"
            }
        }, {
            "contains": {
                "query": {"transportMode":"TRAIN"}
            }
        }]
    }, {
        "responses": [{
            "is": {
                "statusCode": 200,
                "headers": {
                    "Content-Type": "application/json; charset=utf-8"
                },
                "body": "<%- stringify(filename, 'busDeviationsResponse.ejs') %>"
            },
            "_behaviors": {
                "decorate": "function (request, response) { var now = new Date().toISOString().substring(0, 10); response.body = response.body.replace(/{TODAY}/g, now);}"
            }
        }],
        "predicates": [{
            "contains": {
                "path": "deviations.json",
                "method": "GET"
            }
        }, {
            "contains": {
                "query": {"transportMode":"BUS"}
            }
        }]
    }, {
        "responses": [{
            "is": {
                "statusCode": 200,
                "headers": {
                    "Content-Type": "application/json; charset=utf-8"
                },
                "body": "<%- stringify(filename, 'subwayDeviationsResponse.ejs') %>"
            },
            "_behaviors": {
                "decorate": "function (request, response) { var now = new Date().toISOString().substring(0, 10); response.body = response.body.replace(/{TODAY}/g, now);}"
            }
        }],
        "predicates": [{
            "contains": {
                "path": "deviations.json",
                "method": "GET"
            }
        }, {
            "contains": {
                "query": {"transportMode":"SUBWAY"}
            }
        }]
    }]
}
